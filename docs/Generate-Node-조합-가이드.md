# ğŸ¨ Generate Node ì…ë ¥ ì¡°í•© ê°€ì´ë“œ

Z-Image Advanced WebUIì˜ ë…¸ë“œ ê¸°ë°˜ ì›Œí¬í”Œë¡œìš°ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ìƒì„± ì¡°í•©ì„ ì •ë¦¬í•œ ë¬¸ì„œì…ë‹ˆë‹¤.

---

## ğŸ“¦ ë…¸ë“œ ì¢…ë¥˜ì™€ í•¸ë“¤

| ë…¸ë“œ | ì¶œë ¥ í•¸ë“¤ | ìƒ‰ìƒ | ì„¤ëª… |
|------|----------|------|------|
| **PromptNode** | Prompt | ğŸŸ¢ ë…¹ìƒ‰ | í•œêµ­ì–´/ì˜ì–´ í”„ë¡¬í”„íŠ¸ ì…ë ¥ |
| **ParametersNode** | Params | ğŸŸ£ ë³´ë¼ìƒ‰ | í•´ìƒë„, Steps, Seed, Sampler ë“± |
| **ImageInputNode** | Image | ğŸ”µ íŒŒë€ìƒ‰ | ì›ë³¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ |
| **ControlNode** | Control | ğŸŸ  ì£¼í™©ìƒ‰ | ì»¨íŠ¸ë¡¤ ì´ë¯¸ì§€ (Canny, HED, Depth, Pose, MLSD) |
| **MaskNode** | Mask | ğŸ©· í•‘í¬ìƒ‰ | ì¸í˜ì¸íŒ… ë§ˆìŠ¤í¬ |
| **PreviewNode** | - | - | ìƒì„±ëœ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° |

---

## ğŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ ì¡°í•©

### 1ï¸âƒ£ ê¸°ë³¸ Text-to-Image (t2i)

```
PromptNode + ParametersNode â†’ GenerateNode â†’ PreviewNode
```

- **í•„ìˆ˜**: Prompt
- **ê¶Œì¥**: Params (í•´ìƒë„, Steps, Seed ë“± ì„¤ì •)
- **ê²°ê³¼**: í”„ë¡¬í”„íŠ¸ ê¸°ë°˜ ì´ë¯¸ì§€ ìƒì„±

---

### 2ï¸âƒ£ ControlNet ìƒì„±

```
ImageInputNode â†’ ControlNode
                     â†“
PromptNode + ParametersNode + ControlNode â†’ GenerateNode â†’ PreviewNode
```

- **í•„ìˆ˜**: Prompt + Control (ì¶”ì¶œëœ ì»¨íŠ¸ë¡¤ ì´ë¯¸ì§€)
- **ì»¨íŠ¸ë¡¤ íƒ€ì…**: `canny`, `hed`, `depth`, `pose`, `mlsd`
- **ê²°ê³¼**: êµ¬ì¡°/í¬ì¦ˆë¥¼ ìœ ì§€í•˜ë©´ì„œ ìƒˆë¡œìš´ ì´ë¯¸ì§€ ìƒì„±

---

### 3ï¸âƒ£ ì¸í˜ì¸íŒ… (Inpainting)

```
ImageInputNode â†’ MaskNode
                    â†“
PromptNode + ParametersNode + MaskNode â†’ GenerateNode â†’ PreviewNode
```

- **í•„ìˆ˜**: Prompt + Mask (ë§ˆìŠ¤í¬ ì´ë¯¸ì§€ + ì›ë³¸ ì´ë¯¸ì§€)
- **MaskNode**ì—ì„œ ì›ë³¸ ì´ë¯¸ì§€ì— ë§ˆìŠ¤í¬ë¥¼ ê·¸ë¦¼
- **ê²°ê³¼**: ë§ˆìŠ¤í¬ ì˜ì—­ë§Œ ìƒˆë¡œ ìƒì„±

---

### 4ï¸âƒ£ Image + Inpainting (ì§ì ‘ ì´ë¯¸ì§€ ì—°ê²°)

```
ImageInputNode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â†“
PromptNode + ParametersNode + Image + MaskNode â†’ GenerateNode â†’ PreviewNode
```

- **Image** í•¸ë“¤ë¡œ ì›ë³¸ ì´ë¯¸ì§€ ì§ì ‘ ì—°ê²°
- **Mask** í•¸ë“¤ë¡œ ë§ˆìŠ¤í¬ ì—°ê²°
- **ê²°ê³¼**: ë³„ë„ì˜ ì›ë³¸ ì´ë¯¸ì§€ì™€ ë§ˆìŠ¤í¬ë¡œ ì¸í˜ì¸íŒ…

---

### 5ï¸âƒ£ ControlNet + Inpainting (ë³µí•©)

```
ImageInputNode â†’ ControlNode â”€â”€â”€â”
                                 â†“
PromptNode + ParametersNode + Control + MaskNode â†’ GenerateNode â†’ PreviewNode
```

- **Control**: êµ¬ì¡° ê°€ì´ë“œ
- **Mask**: ì¸í˜ì¸íŒ… ì˜ì—­
- **ê²°ê³¼**: ë§ˆìŠ¤í¬ ì˜ì—­ì„ ì»¨íŠ¸ë¡¤ êµ¬ì¡°ì— ë§ê²Œ ì¬ìƒì„±

---

## ğŸ”— ë…¸ë“œ ì—°ê²° íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PromptNode    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ (í•œêµ­ì–´/ì˜ì–´)    â”‚                         â”‚ Prompt
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ParametersNode  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚             â”‚â”€â”€â”€â”€â”€â†’â”‚  PreviewNode â”‚
â”‚ (í•´ìƒë„,Stepsë“±) â”‚    Params         â”‚  Generate   â”‚Image â”‚   (ë¯¸ë¦¬ë³´ê¸°)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚    Node     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚             â”‚
â”‚ ImageInputNode  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚   (ì´ë¯¸ì§€ ì—…ë¡œë“œ) â”‚    Image          â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚             â”‚
        â”‚                              â”‚             â”‚
        â–¼                              â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚             â”‚
â”‚   ControlNode   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚(Canny,Depthë“±)  â”‚    Control        â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚             â”‚
                                      â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚             â”‚
â”‚    MaskNode     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚   (ì¸í˜ì¸íŒ… ë§ˆìŠ¤í¬)â”‚    Mask                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ GenerateNode ì…ë ¥ í•¸ë“¤ ìƒì„¸

GenerateNodeëŠ” ë‹¤ìŒ 5ê°œì˜ ì…ë ¥ í•¸ë“¤ì„ ê°€ì§‘ë‹ˆë‹¤:

| í•¸ë“¤ | ìœ„ì¹˜ | ìƒ‰ìƒ | ì—°ê²° ë…¸ë“œ | ìš©ë„ |
|------|------|------|----------|------|
| **Prompt** | ìƒë‹¨ (12%) | ğŸŸ¢ ë…¹ìƒ‰ | PromptNode | ìƒì„± í”„ë¡¬í”„íŠ¸ |
| **Params** | ìƒë‹¨ (30%) | ğŸŸ£ ë³´ë¼ìƒ‰ | ParametersNode | ìƒì„± íŒŒë¼ë¯¸í„° |
| **Image** | ì¤‘ì•™ (48%) | ğŸ”µ íŒŒë€ìƒ‰ | ImageInputNode | ì›ë³¸ ì´ë¯¸ì§€ (ì¸í˜ì¸íŒ…ìš©) |
| **Control** | í•˜ë‹¨ (66%) | ğŸŸ  ì£¼í™©ìƒ‰ | ControlNode | ì»¨íŠ¸ë¡¤ ì´ë¯¸ì§€ |
| **Mask** | ìµœí•˜ë‹¨ (84%) | ğŸ©· í•‘í¬ìƒ‰ | MaskNode | ì¸í˜ì¸íŒ… ë§ˆìŠ¤í¬ |

---

## âš™ï¸ ParametersNode ìƒì„¸

ParametersNodeì—ì„œ **Image** ë˜ëŠ” **Control** í•¸ë“¤ë¡œ ì—°ê²°í•˜ë©´:

- ì—°ê²°ëœ ì´ë¯¸ì§€ì˜ í•´ìƒë„ë¥¼ í‘œì‹œ
- "í•´ìƒë„ ì ìš©" ë²„íŠ¼ìœ¼ë¡œ ìë™ í•´ìƒë„ ë§ì¶¤
- **Control** ì—°ê²° ì‹œ `Control Scale` ìŠ¬ë¼ì´ë” í™œì„±í™”

### ì§€ì› íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„° | ê¸°ë³¸ê°’ | ë²”ìœ„ | ì„¤ëª… |
|---------|-------|------|------|
| **Resolution** | 1024x1024 | 256~2048 | í”„ë¦¬ì…‹: 1:1, 9:16, 16:9, 2:3, 3:2, 3:4 |
| **Steps** | 25 | 1~50 | ì¶”ë¡  ìŠ¤í… ìˆ˜ |
| **Control Scale** | 0.75 | 0~1 | ì»¨íŠ¸ë¡¤ë„· ì˜í–¥ë„ (Control ì—°ê²° ì‹œ) |
| **Seed** | random | - | ì¬í˜„ ê°€ëŠ¥í•œ ì‹œë“œ ê°’ |
| **Sampler** | Flow | Flow, Flow_Unipc, Flow_DPM++ | ìƒ˜í”ŒëŸ¬ ì¢…ë¥˜ |

---

## ğŸ¯ ControlNode ìƒì„¸

### ì§€ì› ì»¨íŠ¸ë¡¤ íƒ€ì…

| íƒ€ì… | ì„¤ëª… | ìš©ë„ |
|------|------|------|
| **Canny** | ì—£ì§€ ê²€ì¶œ | ìœ¤ê³½ì„  ê¸°ë°˜ ìƒì„± |
| **HED** | í™€ë¦¬ìŠ¤í‹± ì—£ì§€ ê²€ì¶œ | ë¶€ë“œëŸ¬ìš´ ì—£ì§€ ê¸°ë°˜ ìƒì„± |
| **Depth** | ê¹Šì´ ë§µ | 3D ê¹Šì´ êµ¬ì¡° ìœ ì§€ |
| **Pose** | í¬ì¦ˆ ì¶”ì¶œ | ì¸ì²´ í¬ì¦ˆ ìœ ì§€ |
| **MLSD** | ì§ì„  ê²€ì¶œ | ê±´ì¶•/êµ¬ì¡°ë¬¼ ìƒì„± |

### ì—°ê²° ë°©ì‹

1. **ì§ì ‘ ì—…ë¡œë“œ**: ControlNodeì—ì„œ ì´ë¯¸ì§€ ì§ì ‘ ì—…ë¡œë“œ
2. **ì—°ê²° ë°©ì‹**: ImageInputNode â†’ ControlNode (Input í•¸ë“¤)

---

## ğŸ­ MaskNode ìƒì„¸

### ëª¨ë“œ

| ëª¨ë“œ | ì„¤ëª… |
|------|------|
| **Draw** | ìº”ë²„ìŠ¤ì— ì§ì ‘ ë§ˆìŠ¤í¬ ê·¸ë¦¬ê¸° |
| **Upload** | ë§ˆìŠ¤í¬ ì´ë¯¸ì§€ ì—…ë¡œë“œ |

### ì—°ê²° ë°©ì‹

1. **ì§ì ‘ ì—…ë¡œë“œ**: MaskNodeì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ í›„ ë§ˆìŠ¤í¬ ê·¸ë¦¬ê¸°
2. **ì—°ê²° ë°©ì‹**: ImageInputNode â†’ MaskNode (Input í•¸ë“¤)

---

## ğŸ“ ìš”ì•½ í‘œ

| ì¡°í•© | í•„ìˆ˜ ì—°ê²° | ì„ íƒ ì—°ê²° | ê²°ê³¼ |
|------|----------|----------|------|
| **Text-to-Image** | Prompt | Params | ê¸°ë³¸ ì´ë¯¸ì§€ ìƒì„± |
| **ControlNet** | Prompt + Control | Params | êµ¬ì¡° ìœ ì§€ ìƒì„± |
| **Inpainting** | Prompt + Mask | Params, Image | ë§ˆìŠ¤í¬ ì˜ì—­ ì¬ìƒì„± |
| **Control+Inpaint** | Prompt + Control + Mask | Params | ë³µí•© ì œì–´ ìƒì„± |

---

## ğŸ”§ ë°±ì—”ë“œ íŒŒë¼ë¯¸í„° ë§¤í•‘

í”„ë¡ íŠ¸ì—”ë“œ ë…¸ë“œì—ì„œ ìˆ˜ì§‘ëœ ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë°±ì—”ë“œ APIë¡œ ì „ì†¡ë©ë‹ˆë‹¤:

```typescript
{
  prompt: string,              // PromptNode
  prompt_ko: string,           // PromptNode (í•œêµ­ì–´)
  width: number,               // ParametersNode
  height: number,              // ParametersNode
  num_inference_steps: number, // ParametersNode (steps)
  seed: number | null,         // ParametersNode
  sampler: string,             // ParametersNode
  control_context_scale: number, // ParametersNode (controlScale)
  control_type: string,        // ControlNode
  control_image_path: string,  // ControlNode
  mask_image_path: string,     // MaskNode
  original_image_path: string, // MaskNode ë˜ëŠ” ImageInputNode
}
```

---

## ğŸ“… ë¬¸ì„œ ì •ë³´

- **ì‘ì„±ì¼**: 2024ë…„ 12ì›”
- **ë²„ì „**: 1.0
- **ê´€ë ¨ íŒŒì¼**:
  - `frontend/src/components/Nodes/GenerateNode.tsx`
  - `frontend/src/components/Nodes/PromptNode.tsx`
  - `frontend/src/components/Nodes/ParametersNode.tsx`
  - `frontend/src/components/Nodes/ImageInputNode.tsx`
  - `frontend/src/components/Nodes/ControlNode.tsx`
  - `frontend/src/components/Nodes/MaskNode.tsx`
  - `backend/services/image_generator.py`
  - `backend/api/generation.py`

